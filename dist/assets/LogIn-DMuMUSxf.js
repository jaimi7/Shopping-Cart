import{u as L,r as n,o as $,a as P,d as c,m as g,f as l,h as U,n as C,i as v,b as s,e as f,t as y,j as b,w as R,p as A,k as N,l as h}from"./index-DH-GfHcV.js";import{c as B,a as k,F as _,d as x,r as j,e as q}from"./index.esm-BO0iQwEr.js";import{r as D,i as F,a as M}from"./index-CN-DPHDF.js";const z={class:"w-screen h-screen flex items-center"},I={class:"auth-detail"},Y={class:"error-message"},Z={class:"input bg-white flex justify-between"},J={class:"error-message"},O={for:"remember",class:"flex items-center label my-5"},T=["disabled"],W={__name:"LogIn",setup(G){const w=L(),S=U(),i=n(!1),r=n(null),u=n(null),d=n(!1),m=n(!1),V=B({Email:k().required().email(),Password:k().required().min(8).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,}$/,"Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character")}),E=async()=>{i.value=!0;const t={email:r.value,password:u.value};await F.post(M.login,t).then(({data:e})=>{d.value?w.sessionStore({password:t.password,email:t.email}):w.sessionRemove(),w.loginUser(e.data),h.success((e==null?void 0:e.message)??"User Login Success!"),S.push("/")}).catch(e=>{var p,a;h.error(((a=(p=e==null?void 0:e.response)==null?void 0:p.data)==null?void 0:a.message)??"User Can't Login!")}).finally(()=>{i.value=!1})};return $(()=>{const t=sessionStorage.getItem("authShopper");if(t){const e=JSON.parse(t);r.value=e.email,u.value=e.password,d.value=!0}}),(t,e)=>{const p=C("RouterLink");return v(),P("div",z,[c(l(_),{onSubmit:E,"validation-schema":l(V),class:"auth"},{default:g(({errors:a})=>[e[8]||(e[8]=s("h1",{class:"auth-title"},"Login",-1)),s("p",I,[e[5]||(e[5]=f(" Doesn't have an account yet? ")),c(p,{to:"/signup",class:"route-link"},{default:g(()=>e[4]||(e[4]=[f("Sign Up")])),_:1})]),e[9]||(e[9]=s("label",{for:"email",class:"label"},"Email Address",-1)),c(l(x),{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=o=>r.value=o),type:"email",name:"Email",id:"email",class:"input",placeholder:"Enter Your Email Address"},null,8,["modelValue"]),s("p",Y,y(a==null?void 0:a.Email),1),e[10]||(e[10]=s("label",{for:"password",class:"label"},"Password",-1)),s("div",Z,[c(l(x),{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=o=>u.value=o),type:m.value?"text":"password",name:"Password",id:"password",class:"text-gray-900 placeholder:text-gray-400 focus:outline-none w-full",placeholder:"Enter Your Password"},null,8,["modelValue","type"]),s("div",{class:"pl-2",onClick:e[2]||(e[2]=o=>m.value=!m.value)},[m.value?(v(),b(l(j),{key:0,class:"password-icon"})):(v(),b(l(q),{key:1,class:"password-icon"}))])]),s("p",J,y(a==null?void 0:a.Password),1),s("label",O,[R(s("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>d.value=o),type:"checkbox",id:"remember",class:"w-4 h-4 cursor-pointer mr-2"},null,512),[[A,d.value]]),e[6]||(e[6]=f(" Remember Me "))]),s("button",{type:"submit",class:"button flex items-center justify-center w-full mt-10",disabled:i.value},[e[7]||(e[7]=f(" Login ")),i.value?(v(),b(l(D),{key:0,class:"loading-btn"})):N("",!0)],8,T)]),_:1},8,["validation-schema"])])}}};export{W as default};
