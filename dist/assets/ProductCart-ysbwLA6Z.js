import{r as D,_ as B}from"./AddToCart-CAwNB0n9.js";import{r as w,i as x,a as b}from"./index-CN-DPHDF.js";import{a as r,b as s,i as d,u as F,r as h,o as N,e as v,k as R,d as f,f as c,F as T,g as q,t as i,h as Z,l as _,j as k}from"./index-DH-GfHcV.js";function A(I,y){return d(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"fill-rule":"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z","clip-rule":"evenodd"})])}const S={class:"auth-title flex items-center justify-evenly mt-1 sm:mt-2 md:mt-3 mb-2 sm:mb-4 md:mb-6"},j={key:0,class:"no-data"},H={key:1,class:"m-auto rounded-xl md:w-5/6 lg:w-3/4"},M={class:"table-pad flex space-x-1 sm:space-x-2 md:space-x-3 items-center"},E=["src"],Q={class:"mr-2"},z={class:"text-xs sm:text-sm md:text-base font-semibold"},G={class:"text-xs md:text-sm text-yellow-700 font-semibold cursor-pointer hover:underline"},J={class:"text-green-600 text-xs font-bold no-wrap sm:hidden"},K={class:"table-pad text-green-600 text-xs sm:text-sm md:text-base lg:text-lg font-bold no-wrap hidden sm:table-cell"},O={class:"table-pad"},U={class:"table-pad text-blue-700 text-xs sm:text-sm md:text-base lg:text-lg font-bold no-wrap"},W={class:"text-base sm:text-lg md:text-xl lg:text-2xl font-bold border-t-2 border-gray-600 bg-yellow-100"},X={colspan:"3",class:"table-pad no-wrap"},Y={key:2,class:"no-data"},at={__name:"ProductCart",setup(I){const y=Z(),m=F(),g=h(!1),o=h([]),p=h(0),C=async(a,t)=>{a.isCartLoading=!0;const l={productId:a.productId._id,quantity:1,isIncreasing:t};await x.post(b.addCart,l).then(({data:e})=>{var u;let n=e.data;o.value=n.items.map(V=>({...V,isDeleting:!1,isCartLoading:!1}))??[],p.value=n.totalAmount,m.setCartValue(((u=o.value)==null?void 0:u.length)??0)}).catch(e=>{var n,u;_.error((u=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:u.message)}).finally(()=>{a.isCartLoading=!1})},L=async()=>{g.value=!0,await x.get(b.getCart).then(({data:a})=>{var t;o.value=a.data.items.map(l=>({...l,isDeleting:!1,isCartLoading:!1}))??[],p.value=a.data.totalAmount,m.setCartValue(((t=o.value)==null?void 0:t.length)??0)}).catch(a=>{var t,l;console.error((l=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:l.message)}).finally(()=>{g.value=!1})},$=async()=>{o.value=[],m.setCartValue(0),await x.delete(b.deleteCart).then(()=>{_.success("Remove All Item From Cart!")}).catch(a=>{var t,l;console.error((l=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:l.message)})},P=async a=>{a.isDeleting=!0,await x.delete(`${b.deleteCartItem}${a.productId._id}`).then(({data:t})=>{var e;let l=t.data;o.value=l.items.map(n=>({...n,isDeleting:!1,isCartLoading:!1}))??[],p.value=l.totalAmount,m.setCartValue(((e=o.value)==null?void 0:e.length)??0),_.success(t.message)}).catch(t=>{var l,e;console.error((e=(l=t==null?void 0:t.response)==null?void 0:l.data)==null?void 0:e.message)}).finally(()=>{a.isDeleting=!1})};return N(()=>{L()}),(a,t)=>{var l;return d(),r("div",null,[s("h1",S,[t[3]||(t[3]=v("Cart ")),!g.value&&((l=o.value)!=null&&l.length)?(d(),r("button",{key:0,class:"icon-btn",onClick:t[0]||(t[0]=e=>$())},[f(c(A)),t[2]||(t[2]=v(" Remove All From Cart "))])):R("",!0)]),g.value?(d(),r("div",j,[f(c(w),{class:"loading-btn"}),t[4]||(t[4]=v(" Loading... "))])):o.value.length?(d(),r("table",H,[t[6]||(t[6]=s("tr",{class:"text-sm sm:text-base md:text-lg lg:text-xl font-bold border-b-2 border-gray-600"},[s("td",{class:"table-pad"}),s("td",{class:"table-pad"},"Item"),s("td",{class:"table-pad hidden sm:block"},"Price"),s("td",{class:"table-pad"},"Quantity"),s("td",{class:"table-pad"},"Total")],-1)),(d(!0),r(T,null,q(o.value,e=>(d(),r("tr",{key:e},[s("td",null,[e.isDeleting?(d(),k(c(w),{key:0,class:"loading-btn text-red-600 cursor-pointer"})):(d(),k(c(A),{key:1,class:"loading-btn text-red-600 cursor-pointer",onClick:n=>P(e)},null,8,["onClick"]))]),s("td",M,[s("img",{src:e.productId.image,alt:"Product Image",class:"h-10 w-10 sm:h-16 sm:w-16 md:h-20 md:w-20 lg:h-24 lg:w-24"},null,8,E),s("div",Q,[s("h3",z,i(e.productId.title),1),s("p",null,[s("span",G,i(e.productId.category),1),s("span",J," ₹ "+i(e.price)+" /- ",1)])])]),s("td",K," ₹ "+i(e.price)+" /- ",1),s("td",O,[f(B,{value:e.quantity,isLoading:e.isCartLoading,onRemoveProduct:n=>C(e,!1),onAddProduct:n=>C(e,!0)},null,8,["value","isLoading","onRemoveProduct","onAddProduct"])]),s("td",U,"₹ "+i(e.price*e.quantity)+" /-",1)]))),128)),s("tr",W,[t[5]||(t[5]=s("td",{colspan:"2",class:"table-pad text-end"},"Total Amount",-1)),s("td",X,"₹ "+i(p.value.toFixed(2))+" /-",1)])])):(d(),r("div",Y,[f(c(D),{class:"loading-btn"}),s("p",null,[t[7]||(t[7]=v(" No Product Available ")),s("span",{class:"hover:underline text-yellow-700 cursor-pointer",onClick:t[1]||(t[1]=e=>c(y).push("/"))}," Back To Home")])]))])}}};export{at as default};
